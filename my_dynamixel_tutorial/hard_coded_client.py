#!/usr/bin/env python
import roslib
roslib.load_manifest('my_dynamixel_tutorial')

import rospy
import actionlib
from std_msgs.msg import Float64
import trajectory_msgs.msg 
import control_msgs.msg  
from trajectory_msgs.msg import JointTrajectoryPoint
from control_msgs.msg import JointTrajectoryAction, JointTrajectoryGoal, FollowJointTrajectoryAction, FollowJointTrajectoryGoal

duration = 0.5

class Joint:
        def __init__(self, motor_name):
            #arm_name should be b_arm or f_arm
            	self.name = motor_name   
		print(motor_name)        
		self.jta = actionlib.SimpleActionClient('/'+self.name+'_controller/follow_joint_trajectory', FollowJointTrajectoryAction)
		rospy.loginfo('Waiting for joint trajectory action')
		self.jta.wait_for_server()
		rospy.loginfo('Found joint trajectory action!')

            
        def move_joint(self, angles):
            goal = FollowJointTrajectoryGoal()                  
            char = self.name[0] #either 'f' or 'b'
            goal.trajectory.joint_names = ['motor8', 'motor9','motor10','motor11','motor12','motor13','motor14','motor15','motor16','motor17']
            point = JointTrajectoryPoint()
            point.positions = angles
            point.time_from_start = rospy.Duration(duration)              
            goal.trajectory.points.append(point)
            self.jta.send_goal_and_wait(goal)
              

def main():
	arm = Joint('f_arm')
	arr_temp = ([3.052621767892426, 	2.5372042231628504, 	3.4437868688032642, 	0.1538838812250056, 	-2.48811683795051, 	2.779573187648782, 	0.5123495831538042, 	3.6830878717134246, 	2.825592611285351, 	2.8440003807399785])
	arm.move_joint(arr_temp)
	arr1 = [3.060291671831854,2.6491848206785025,3.5419616392279454,0.320601984668099,-2.1475731030398975,2.7596314374062683,0.3021942152134713,3.5465635815916023,2.457437222192797,3.083301383650139]
	arr2 = [2.9391071895888885,2.66759259013313,3.5634373702583444,0.2975922728498144,-2.1705828148581823,2.5494760694659355,0.35434956200158313,3.1998839235294474,2.4436313951018263,2.8608741694067206]
	arm.move_joint(arr_temp)
	for x in range(len(arr_temp)):
		arr_temp[x] = (arr2[x] - arr1[x] + arr_temp[x])
	arm.move_joint(arr_temp)

	# arr3 = [2.7811071684366673,2.6645246285573587,3.54042765844006 ,0.4908738521234052,-2.1644468917066395,2.497320722677824,0.6621165841238575,3.1922140195900193,2.3623304133438876,2.662990647769473]
	# for x in range(len(arr_temp)):
	# 	arr_temp[x] = (arr3[x] - arr2[x]) + arr_temp[x]
	# arm.move_joint(arr_temp)

	# arr4 = [2.7242333797699252,2.672194532496787,3.5327577545006315,0.5384272565478601,-2.167514853282411,2.12899058431281,0.7167185264875144,2.8624081501946064,2.2585245862529167,2.949615546190614]
	# for x in range(len(arr_temp)):
	# 	arr_temp[x] = (arr4[x] - arr3[x]) + arr_temp[x]
	# arm.move_joint(arr_temp)

	# arr5 = [2.78724309158821,2.8501363038915213,3.9177869322599275,0.5445631796994026,-2.158310968555097,2.457437222192797,0.5967185264875144,3.1692043077717345,2.531068300011308,2.813320764982266]
	# for x in range(len(arr_temp)):
	# 	arr_temp[x] = (arr5[x] - arr4[x]) + arr_temp[x]
	# arm.move_joint(arr_temp)

	# arr6 = [3.0127382674073995,2.9145634969827183,4.01902966426038 ,0.2837864457588436,-2.1537090261914402,2.514194511344566,0.2715145994557585,3.232097520075046,2.5418061655265074,3.038815940801455]
	# for x in range(len(arr_temp)):
	# 	arr_temp[x] = (arr6[x] - arr5[x]) + arr_temp[x]
	# arm.move_joint(arr_temp)

	# arr7 = [3.0464858447408836,2.9989324403164286,3.8748354701991294,0.15493205957644976,-2.1567769877672114,2.742757648739526,0.10277671278833796,3.7597869111077067,2.5862916083751912,3.095573229953224]
	# for x in range(len(arr_temp)):
	# 	arr_temp[x] = (arr7[x] - arr6[x]) + arr_temp[x]
	# arm.move_joint(arr_temp)

	# sleep(0.80)
	# arr8 = [3.2597091742569875,2.9253013624979176,3.6386024288647407,0.256896448593132,-2.167514853282411,2.5709518004963345,0.2561747915769021,3.377825694924182,2.1475731030398975,3.3164664634087564]
	# for x in range(len(arr_temp)):
	# 	arr_temp[x] = (arr8[x] - arr7[x]) + arr_temp[x]
	# arm.move_joint(arr_temp)


	# for x in range(0,4):
	# 	arm.move_joint([3.060291671831854,2.6491848206785025,3.5419616392279454,0.320601984668099,-2.1475731030398975,2.7596314374062683,0.3021942152134713,3.5465635815916023,2.457437222192797,3.083301383650139])
	# 	arm.move_joint([2.9391071895888885,2.66759259013313,3.5634373702583444,0.2975922728498144,-2.1705828148581823,2.5494760694659355,0.35434956200158313,3.1998839235294474,2.4436313951018263,2.8608741694067206])
	# 	arm.move_joint([2.7811071684366673,2.6645246285573587,3.54042765844006 ,0.4908738521234052,-2.1644468917066395,2.497320722677824,0.6621165841238575,3.1922140195900193,2.3623304133438876,2.662990647769473])
	# 	arm.move_joint([2.7242333797699252,2.672194532496787,3.5327577545006315,0.5384272565478601,-2.167514853282411,2.12899058431281,0.7167185264875144,2.8624081501946064,2.2585245862529167,2.949615546190614])
	# 	arm.move_joint([2.78724309158821,2.8501363038915213,3.9177869322599275,0.5445631796994026,-2.158310968555097,2.457437222192797,0.5967185264875144,3.1692043077717345,2.531068300011308,2.813320764982266])
	# 	arm.move_joint([3.0127382674073995,2.9145634969827183,4.01902966426038 ,0.2837864457588436,-2.1537090261914402,2.514194511344566,0.2715145994557585,3.232097520075046,2.5418061655265074,3.038815940801455])
	# 	arm.move_joint([3.0464858447408836,2.9989324403164286,3.8748354701991294,0.15493205957644976,-2.1567769877672114,2.742757648739526,0.10277671278833796,3.7597869111077067,2.5862916083751912,3.095573229953224])
	# 	arm.move_joint([3.2597091742569875,2.9253013624979176,3.6386024288647407,0.1536896448593132,-2.167514853282411,2.5709518004963345,0.2561747915769021,3.377825694924182,2.1475731030398975,3.3164664634087564])
	


	#arm.move_joint([3.060291671831854,2.6491848206785025,3.5419616392279454,0.320601984668099,-2.1475731030398975,2.7596314374062683,0.3021942152134713,3.5465635815916023,2.457437222192797,3.083301383650139])
	#arm.move_joint([ 	3.2566412126812163, 	2.662990647769473, 	3.5634373702583444, 	0.10737865515199488, 	-2.162912910918754, 	2.718213956133356, 	0.06289321230331128, 	3.5619033894704586, 	2.425223625647199, 	3.2658450974085302])
	#arm.move_joint([ 	3.4345829840759508, 	2.684466378799872, 	4.014427721896723, 	0.09817477042468103, 	-1.876058503584139, 	2.794912995527638, 	0.1641359443037636, 	3.4652625998336632, 	2.414485760131999, 	3.368621810196868])

	print("Hello1")

                        
if __name__ == '__main__':
	rospy.init_node('trajectory_client')
	main()
	print("Hello")

